# Sql规范

1. [基本规范](#1-基本规范)
2. [性能约束](#2-性能约束)

---

## 1 基本规范

## 1.1. 数据库

- 名称使用英文小写和下划线分割的规则, **必须**以复数形式结尾, 字段长度不能超过3个单词长度, 单个单词长度超过10个字母的应当使用缩写；

- 如没有特殊的需求，尽量采用 `utf8` 作为默认字符集。

- 坚持最小权限控制原则。

- 设计数据库时遵循范式化设计，至少达到第三范式，特殊情况下可以让极少数的字段冗余。

### 1.2. 数据表

- 必须使用 `项目名_模块名_表名` 来作为数据表的完整名称，且必须使用英文全名，并且采用小写和下划线分割的规则，如果真的太长需要缩写，则采用首4个字母，尽量做到语义要明确，不能让人产生困惑。

- **必须**要有表注释。

- 如非必要，**必须**采用 `utf8` 字符集。

- 如没有特殊需求，尽量采用 `innodb` 引擎。

- 每个表都**必须**有一个自增主键 `id`。

- 每个表都**必须**有 `create_time` 字段，字段类型**必须**为 `int(10)`，字段值必须为时间戳。
 
- 每个表都**必须**有 `update_time` 字段，字段类型**必须**为 `int(10)`，字段值必须为时间戳。

- 每个表都**必须**有 `create_user` 字段，字段类型**必须**为 `int` ，字段长度**必须**设置为 `11`。
 
- 每个表都**必须**有 `update_user` 字段，字段类型**必须**为 `int`，字段长度**必须**设置为 `11`。

- 每个表都**必须**有 `del_flg` 字段，字段类型**必须**为 `tinyint` ，默认是必须设置为 `0`。

### 1.3. 字段

- 字段名采用规范的英文小写格式，并且以下划线”_”分割，长度不能超过3个单词长度，单个单词长度超过10个字母的应当使用缩写，**禁止**使用mysql的关键字作为字段名， 正确的例子如 `user_id`、`room_type`。

- `timestamp、image、datetime、smalldatetime、uniqueidentifier、binary、sql_variant、binary、varbinary` 外，必须有默认值。

- 如非必要，所有字段**必须**设为 `not null`。

- 字符型的默认值为一个空字符值串 `''`。
 
- 数值型的默认值为数值 `0` (具体看业务可以用其他数值)。

- 系统中所有逻辑型中数值 `0` 表示为“假”；数值 `1` 表示为“真”。

- 每个字段**必须**要有注释。

- 很多表的字段是类似的，如时间字段（创建时间，最后一次修改时间等），此时每一个表的命名都应该一致且类型也应该一致，如不能这个表使用 `int` 类型，那个表使用 `timestamp` 类型，另外的表又使用 `datetime` 类型，这个表命名 `created_at`，那个表命名 `create_time`。

---

## 2 性能约束

数据库的性能优化是个很庞大的话题，特别指出的是在设计数据库和查询时要时刻注意性能，因为大多数情况下，出现性能瓶颈的问题都在数据库的读写上，这方面的知识请查看相关的文章和书籍。

以下是一些基本的注意事项：

- **禁止**查询语句用 `*` 通配符。